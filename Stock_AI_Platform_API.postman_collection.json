{
	"info": {
		"_postman_id": "e9be6685-3d7e-4551-97f6-d89d8abf817a",
		"name": "Stock AI Platform API",
		"description": "Complete API test collection for Stock AI Platform\n\nBase URL: http://localhost:8000\n\nThis collection tests:\n- Health checks\n- Game data endpoints\n- Multiplayer room management\n- Leaderboards\n- Player state management\n\nAll endpoints follow /api/v1/ versioning.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "51150690",
		"_collection_link": "https://wdng9647-3488240.postman.co/workspace/StockAI-API~dcd92979-69f3-4273-8158-af9684ca6178/collection/51150690-e9be6685-3d7e-4551-97f6-d89d8abf817a?action=share&source=collection_link&creator=51150690"
	},
	"item": [
		{
			"name": "Health & Info",
			"item": [
				{
					"name": "Root - Get API Info",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"})",
									"",
									"pm.test('Response has correct structure', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.an('object');",
									"    pm.expect(jsonData).to.have.property('service');",
									"    pm.expect(jsonData).to.have.property('version');",
									"})",
									"",
									"pm.test('Name and version are strings', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.service).to.be.a('string');",
									"    pm.expect(jsonData.version).to.be.a('string');",
									"})"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								""
							]
						},
						"description": "Get basic API information including version and available endpoints."
					},
					"response": []
				},
				{
					"name": "Health Check",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"})",
									"",
									"pm.test('Response has correct structure', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.an('object');",
									"    pm.expect(jsonData).to.have.property('status');",
									"})",
									"",
									"pm.test('Status indicates healthy', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.status).to.be.a('string');",
									"    pm.expect(jsonData.status.toLowerCase()).to.be.oneOf([",
									"        'healthy',",
									"        'ok',",
									"        'up'",
									"    ]);",
									"})"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/health",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"health"
							]
						},
						"description": "Check API health status and database connectivity."
					},
					"response": []
				}
			],
			"description": "Basic health and info endpoints"
		},
		{
			"name": "Game Data",
			"item": [
				{
					"name": "Get Game Data - Default (30 days)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"})",
									"",
									"pm.test('Response has correct structure', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.an('object');",
									"    pm.expect(jsonData).to.have.property('days');",
									"})",
									"",
									"pm.test('Tickers is an array of strings', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.days).to.be.an('array');",
									"    jsonData.days.forEach(function (ticker) {",
									"        pm.expect(ticker).to.be.an('object');",
									"    });",
									"})",
									"",
									"pm.test('Dates is an array of valid date strings', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.days).to.be.an('array');",
									"    jsonData.days.forEach(function (day) {",
									"        pm.expect(day).to.have.property('date');",
									"        pm.expect(day.date).to.be.a('string');",
									"        pm.expect(day.date).to.match(/^\\d{4}-\\d{2}-\\d{2}$/);",
									"    });",
									"})",
									"",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/game/data?days=30",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"game",
								"data"
							],
							"query": [
								{
									"key": "days",
									"value": "30",
									"description": "Number of calendar days (1-90)"
								}
							]
						},
						"description": "Get complete game data for 30 days with default tickers (AAPL, MSFT, GOOGL, AMZN).\n\nResponse includes:\n- Daily prices (OHLCV)\n- AI recommendations\n- News articles\n- Technical indicators"
					},
					"response": []
				},
				{
					"name": "Get Game Data - Custom Tickers",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"})",
									"",
									"",
									"",
									"pm.test('Tickers contains requested tickers', function () {",
									"    const jsonData = pm.response.json();",
									"    const requestedTickers = [",
									"        'AAPL',",
									"        'TSLA',",
									"        'NVDA'",
									"    ];",
									"    pm.expect(jsonData.tickers).to.be.an('array');",
									"    requestedTickers.forEach(function (ticker) {",
									"        pm.expect(jsonData.tickers).to.include(ticker);",
									"    });",
									"})",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/game/data?days=14&tickers=AAPL,TSLA,NVDA",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"game",
								"data"
							],
							"query": [
								{
									"key": "days",
									"value": "14",
									"description": "Number of days"
								},
								{
									"key": "tickers",
									"value": "AAPL,TSLA,NVDA",
									"description": "Comma-separated ticker symbols"
								}
							]
						},
						"description": "Get game data for specific tickers."
					},
					"response": []
				},
				{
					"name": "Get Game Data - Date Range",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"})",
									"",
									"pm.test('Response has correct structure', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.an('object');",
									"    pm.expect(jsonData).to.have.property('days');",
									"    pm.expect(jsonData.days).to.be.an('array');",
									"    ",
									"    // Validate each day object has expected properties",
									"    jsonData.days.forEach(function (dayObj) {",
									"        pm.expect(dayObj).to.have.property('day');",
									"        pm.expect(dayObj).to.have.property('date');",
									"        pm.expect(dayObj).to.have.property('is_trading_day');",
									"        pm.expect(dayObj).to.have.property('prices');",
									"        pm.expect(dayObj).to.have.property('news');",
									"        pm.expect(dayObj).to.have.property('technical_indicators');",
									"        pm.expect(dayObj).to.have.property('recommendations');",
									"    });",
									"})",
									"",
									"pm.test('Dates fall within requested range', function () {",
									"    const jsonData = pm.response.json();",
									"    const startDate = new Date('2025-01-01T00:00:00');",
									"    const endDate = new Date('2025-01-15T23:59:59');",
									"    ",
									"    pm.expect(jsonData.days).to.be.an('array');",
									"    pm.expect(jsonData.days.length).to.be.greaterThan(0);",
									"    ",
									"    jsonData.days.forEach(function (dayObj) {",
									"        const dateStr = dayObj.date;",
									"        const date = new Date(dateStr + 'T00:00:00');",
									"        pm.expect(date.getTime()).to.be.at.least(startDate.getTime());",
									"        pm.expect(date.getTime()).to.be.at.most(endDate.getTime());",
									"    });",
									"})",
									"",
									"pm.test('Prices structure is valid', function () {",
									"    const jsonData = pm.response.json();",
									"    ",
									"    jsonData.days.forEach(function (dayObj) {",
									"        pm.expect(dayObj).to.have.property('prices');",
									"        pm.expect(dayObj.prices).to.be.an('object');",
									"        ",
									"        // For days with prices data (non-empty prices object), validate the structure",
									"        const tickers = Object.keys(dayObj.prices);",
									"        if (tickers.length > 0) {",
									"            tickers.forEach(function (ticker) {",
									"                const priceData = dayObj.prices[ticker];",
									"                pm.expect(priceData).to.have.property('open');",
									"                pm.expect(priceData).to.have.property('high');",
									"                pm.expect(priceData).to.have.property('low');",
									"                pm.expect(priceData).to.have.property('close');",
									"                pm.expect(priceData).to.have.property('volume');",
									"            });",
									"        }",
									"    });",
									"})"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/game/data?start_date=2025-01-01&end_date=2025-01-15",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"game",
								"data"
							],
							"query": [
								{
									"key": "start_date",
									"value": "2025-01-01",
									"description": "Start date (YYYY-MM-DD)"
								},
								{
									"key": "end_date",
									"value": "2025-01-15",
									"description": "End date (YYYY-MM-DD)"
								}
							]
						},
						"description": "Get game data for a specific date range."
					},
					"response": []
				},
				{
					"name": "Get Game Data - Latest Available",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"})",
									"",
									"pm.test('Response has correct structure', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.an('object');",
									"    pm.expect(jsonData).to.have.property('days');",
									"    pm.expect(jsonData.days).to.be.an('array');",
									"    ",
									"    // Validate structure of each day object",
									"    jsonData.days.forEach(function(day) {",
									"        pm.expect(day).to.have.property('day');",
									"        pm.expect(day).to.have.property('date');",
									"        pm.expect(day).to.have.property('is_trading_day');",
									"        pm.expect(day).to.have.property('prices');",
									"        pm.expect(day).to.have.property('news');",
									"        pm.expect(day).to.have.property('recommendations');",
									"        pm.expect(day).to.have.property('technical_indicators');",
									"    });",
									"})",
									"",
									"pm.test('Days array has at most 10 entries', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.days).to.be.an('array');",
									"    pm.expect(jsonData.days.length).to.be.at.most(10);",
									"})",
									"",
									"pm.test('All data types are correct', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.days).to.be.an('array');",
									"    ",
									"    // Validate data types within each day object",
									"    jsonData.days.forEach(function(day) {",
									"        pm.expect(day.day).to.be.a('number');",
									"        pm.expect(day.date).to.be.a('string');",
									"        pm.expect(day.is_trading_day).to.be.a('boolean');",
									"        pm.expect(day.prices).to.be.an('object');",
									"        pm.expect(day.news).to.be.an('array');",
									"        pm.expect(day.recommendations).to.be.an('array');",
									"        pm.expect(day.technical_indicators).to.be.an('object');",
									"    });",
									"})"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/game/data?days=10",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"game",
								"data"
							],
							"query": [
								{
									"key": "days",
									"value": "10",
									"description": "Get last 10 days of available data"
								}
							]
						},
						"description": "Get the most recent 7 days of market data."
					},
					"response": []
				}
			],
			"description": "Game data endpoints for solo and multiplayer modes"
		},
		{
			"name": "Multiplayer - Room Management",
			"item": [
				{
					"name": "Create Room - Async Mode",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200 or 201', function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([",
									"        200,",
									"        201",
									"    ]);",
									"})",
									"",
									"",
									"pm.test('Room code is a string', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.room_code).to.be.a('string');",
									"    pm.expect(jsonData.room_code.length).to.be.above(0);",
									"})",
									"",
									"pm.test('Room has async mode properties', function () {",
									"    const jsonData = pm.response.json();",
									"    if (jsonData.mode) {",
									"        pm.expect(jsonData.mode).to.equal('async');",
									"    }",
									"})",
									"",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"created_by\": \"Mr. Smith\",\n  \"room_name\": \"Economics 101 - Trading Challenge\",\n  \"game_mode\": \"async\",\n  \"config\": {\n    \"initial_cash\": 100000,\n    \"num_days\": 30,\n    \"tickers\": [\"AAPL\", \"MSFT\", \"GOOGL\", \"AMZN\"],\n    \"difficulty\": \"medium\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/multiplayer/rooms",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"multiplayer",
								"rooms"
							]
						},
						"description": "Create a new multiplayer room in async mode.\n\nAsync mode: Players progress independently at their own pace.\n\nReturns: room_code (6-character code students use to join)"
					},
					"response": []
				},
				{
					"name": "Create Room - Sync Manual",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"",
									"// Save room_code and room_id for subsequent requests",
									"if (pm.response.code === 200) {",
									"    const jsonData = pm.response.json();",
									"    pm.environment.set(\"room_code\", jsonData.room_code);",
									"    pm.environment.set(\"room_id\", jsonData.id);",
									"    console.log(\"Room created with code: \" + jsonData.room_code);",
									"}",
									"",
									"pm.test('Status code is 200 or 201', function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([",
									"        200,",
									"        201",
									"    ]);",
									"})",
									"",
									"",
									"",
									"pm.test('Room code is a valid string', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.room_code).to.be.a('string');",
									"    pm.expect(jsonData.room_code.length).to.be.above(0);",
									"})",
									"",
									"pm.test('Room has sync manual mode properties', function () {",
									"    const jsonData = pm.response.json();",
									"    if (jsonData.mode) {",
									"        pm.expect(jsonData.mode).to.equal('sync');",
									"    }",
									"    if (jsonData.sync_type) {",
									"        pm.expect(jsonData.sync_type).to.equal('manual');",
									"    }",
									"})",
									"",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"created_by\": \"Ms. Johnson\",\n  \"room_name\": \"Period 2 - Kahoot Style Trading\",\n  \"game_mode\": \"sync_manual\",\n  \"config\": {\n    \"initial_cash\": 50000,\n    \"num_days\": 15,\n    \"tickers\": [\"AAPL\", \"TSLA\"],\n    \"difficulty\": \"easy\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/multiplayer/rooms",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"multiplayer",
								"rooms"
							]
						},
						"description": "Create room in sync_manual mode.\n\nSync manual: Teacher manually advances days, all students progress together."
					},
					"response": []
				},
				{
					"name": "Create Room - Sync Auto",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200 or 201', function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([",
									"        200,",
									"        201",
									"    ]);",
									"})",
									"",
									"",
									"",
									"pm.test('Room code is a valid string', function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.room_code).to.be.a('string');",
									"    pm.expect(jsonData.room_code.length).to.be.above(0);",
									"})",
									"",
									"pm.test('Room has sync auto mode properties', function () {",
									"    const jsonData = pm.response.json();",
									"    if (jsonData.mode) {",
									"        pm.expect(jsonData.mode).to.equal('sync');",
									"    }",
									"    if (jsonData.sync_type) {",
									"        pm.expect(jsonData.sync_type).to.equal('auto');",
									"    }",
									"})",
									"",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"created_by\": \"Mr. Davis\",\n  \"room_name\": \"Advanced Trading - Timed Challenge\",\n  \"game_mode\": \"sync_auto\",\n  \"day_duration_seconds\": 120,\n  \"config\": {\n    \"initial_cash\": 100000,\n    \"num_days\": 20,\n    \"tickers\": [\"AAPL\", \"MSFT\", \"GOOGL\", \"TSLA\"],\n    \"difficulty\": \"hard\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/multiplayer/rooms",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"multiplayer",
								"rooms"
							]
						},
						"description": "Create room in sync_auto mode.\n\nSync auto: Days auto-advance every X seconds (day_duration_seconds)."
					},
					"response": []
				},
				{
					"name": "Get Room Details",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"})",
									"",
									"",
									"",
									"pm.test('Room has status information', function () {",
									"    const jsonData = pm.response.json();",
									"    if (jsonData.status) {",
									"        pm.expect(jsonData.status).to.be.a('string');",
									"        pm.expect(jsonData.status).to.be.oneOf([",
									"            'waiting',",
									"            'in_progress',",
									"            'completed',",
									"            'active'",
									"        ]);",
									"    }",
									"})",
									"",
									"pm.test('Room has players array if present', function () {",
									"    const jsonData = pm.response.json();",
									"    if (jsonData.players) {",
									"        pm.expect(jsonData.players).to.be.an('array');",
									"    }",
									"})"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/multiplayer/rooms/{{room_code}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"multiplayer",
								"rooms",
								"{{room_code}}"
							]
						},
						"description": "Get complete room information including all players.\n\nUse the room_code saved from Create Room request."
					},
					"response": []
				},
				{
					"name": "Start Game (Sync Mode)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"room_code\": \"{{room_code}}\",\n  \"started_by\": \"string\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/multiplayer/rooms/{{room_code}}/start",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"multiplayer",
								"rooms",
								"{{room_code}}",
								"start"
							]
						},
						"description": "Start the game (sync mode only).\n\nTeacher initiates game start, all students begin at day 0."
					},
					"response": []
				},
				{
					"name": "Advance Day (Sync Manual)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"room_code\": \"{{room_code}}\",\n  \"initiated_by\": \"string\",\n  \"day_time_limit\": 0\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/multiplayer/rooms/{{room_code}}/advance-day",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"multiplayer",
								"rooms",
								"{{room_code}}",
								"advance-day"
							]
						},
						"description": "Advance to next day (sync_manual mode only).\n\nTeacher clicks to progress all students to next day."
					},
					"response": []
				}
			],
			"description": "Room creation and management for multiplayer games"
		},
		{
			"name": "Multiplayer - Player Actions",
			"item": [
				{
					"name": "Join Room",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Save player_id for subsequent requests",
									"if (pm.response.code === 200) {",
									"    const jsonData = pm.response.json();",
									"    pm.environment.set(\"player_id\", jsonData.id);",
									"    console.log(\"Player joined with ID: \" + jsonData.id);",
									"}",
									"",
									"",
									"",
									"",
									"pm.test('Player has name if present', function () {",
									"    const jsonData = pm.response.json();",
									"    if (jsonData.name) {",
									"        pm.expect(jsonData.name).to.be.a('string');",
									"    }",
									"})",
									"",
									"pm.test('Player has ready status if present', function () {",
									"    const jsonData = pm.response.json();",
									"    if (jsonData.ready !== undefined) {",
									"        pm.expect(jsonData.ready).to.be.a('boolean');",
									"    }",
									"})",
									"",
									"pm.test('Player has portfolio if present', function () {",
									"    const jsonData = pm.response.json();",
									"    if (jsonData.portfolio) {",
									"        pm.expect(jsonData.portfolio).to.be.an('object');",
									"    }",
									"})"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"pm.sendRequest({",
									"    url: pm.environment.get(\"base_url\") + \"/api/v1/multiplayer/rooms\",",
									"    method: \"POST\",",
									"    header: \"Content-Type: application/json\",",
									"    body: { \"created_by\": \"Ms. Johnson\",",
									"            \"room_name\": \"Period 2 - Kahoot Style Trading\",",
									"            \"game_mode\": \"sync_manual\",",
									"            \"config\": {",
									"                \"initial_cash\": 50000,",
									"                \"num_days\": 15,",
									"                \"tickers\": [\"AAPL\", \"TSLA\"],",
									"                \"difficulty\": \"easy\"",
									"            }",
									"        }",
									"})"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"room_code\": \"{{room_code}}\",\n  \"player_name\": \"{{player_name}}\",\n  \"player_email\": \"alice@school.edu\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/multiplayer/rooms/join",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"multiplayer",
								"rooms",
								"join"
							]
						},
						"description": "Join an existing room as a player.\n\nUse the 6-character room_code from teacher."
					},
					"response": []
				},
				{
					"name": "Join Room - Player 2",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const jsonData = pm.response.json();",
									"    pm.environment.set(\"player2_id\", jsonData.id);",
									"    console.log(\"Player 2 joined with ID: \" + jsonData.id);",
									"}",
									"",
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"})",
									"",
									"",
									"",
									"pm.test('Player 2 has different ID from Player 1', function () {",
									"    const jsonData = pm.response.json();",
									"    const player1Id = pm.environment.get('player_id');",
									"    if (player1Id) {",
									"        pm.expect(jsonData.player_id).to.not.equal(player1Id);",
									"    }",
									"})",
									"",
									"pm.test('Player has required properties', function () {",
									"    const jsonData = pm.response.json();",
									"    if (jsonData.name) {",
									"        pm.expect(jsonData.name).to.be.a('string');",
									"    }",
									"    if (jsonData.ready !== undefined) {",
									"        pm.expect(jsonData.ready).to.be.a('boolean');",
									"    }",
									"})"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"room_code\": \"{{room_code}}\",\n  \"player_name\": \"Bob Smith\",\n  \"player_email\": \"bob@school.edu\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/multiplayer/rooms/join",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"multiplayer",
								"rooms",
								"join"
							]
						},
						"description": "Add a second player to test multiplayer features."
					},
					"response": []
				},
				{
					"name": "Update Player State",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"current_day\": 1,\n  \"cash\": 95000,\n  \"holdings\": {\n    \"AAPL\": {\n      \"shares\": 10,\n      \"avgCost\": 150.00\n    },\n    \"MSFT\": {\n      \"shares\": 15,\n      \"avgCost\": 300.00\n    }\n  },\n  \"trades\": [\n    {\n      \"day\": 0,\n      \"ticker\": \"AAPL\",\n      \"action\": \"BUY\",\n      \"shares\": 10,\n      \"price\": 150.00,\n      \"total\": 1500.00\n    },\n    {\n      \"day\": 0,\n      \"ticker\": \"MSFT\",\n      \"action\": \"BUY\",\n      \"shares\": 15,\n      \"price\": 300.00,\n      \"total\": 4500.00\n    }\n  ],\n  \"portfolio_value\": 102000,\n  \"total_return_pct\": 2.0,\n  \"total_return_usd\": 2000,\n  \"score\": 250,\n  \"grade\": \"B\",\n  \"score_breakdown\": {\n    \"return_points\": 100,\n    \"discipline_points\": 100,\n    \"ai_bonus\": 50\n  },\n  \"portfolio_history\": [\n    {\n      \"day\": 0,\n      \"value\": 100000,\n      \"return_pct\": 0\n    },\n    {\n      \"day\": 1,\n      \"value\": 102000,\n      \"return_pct\": 2.0\n    }\n  ]\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/multiplayer/players/{{player_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"multiplayer",
								"players",
								"{{player_id}}"
							]
						},
						"description": "Update player's game state after completing a day.\n\nFrontend calls this after each day's trading to save progress."
					},
					"response": []
				},
				{
					"name": "Mark Player Ready (Sync Mode)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"is_ready\": true\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/multiplayer/players/{{player_id}}/ready",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"multiplayer",
								"players",
								"{{player_id}}",
								"ready"
							]
						},
						"description": "Mark player as ready for next day (sync mode).\n\nUseful for tracking which students have finished their trades."
					},
					"response": []
				}
			],
			"description": "Player join and state management"
		},
		{
			"name": "Multiplayer - Leaderboards",
			"item": [
				{
					"name": "Get Leaderboard",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/multiplayer/rooms/{{room_code}}/leaderboard",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"multiplayer",
								"rooms",
								"{{room_code}}",
								"leaderboard"
							]
						},
						"description": "Get leaderboard sorted by score (descending).\n\nShows: rank, player name, score, grade, portfolio value, return %."
					},
					"response": []
				},
				{
					"name": "Get Room State (Polling)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/multiplayer/rooms/{{room_code}}/state",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"multiplayer",
								"rooms",
								"{{room_code}}",
								"state"
							]
						},
						"description": "Get current room state for sync mode.\n\nPoll this endpoint to detect:\n- Game started\n- Day advanced\n- Game ended\n- Current day number"
					},
					"response": []
				}
			],
			"description": "Leaderboard and room state queries"
		},
		{
			"name": "News & Recommendations",
			"item": [
				{
					"name": "Get Recommendations by Date",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/recommendations?date=2025-01-15",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"recommendations"
							],
							"query": [
								{
									"key": "date",
									"value": "2025-01-15",
									"description": "Date in YYYY-MM-DD format"
								}
							]
						},
						"description": "Get AI recommendations for a specific date."
					},
					"response": []
				},
				{
					"name": "Get News by Date",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"})",
									"",
									"pm.test('Response is an array or has news array', function () {",
									"    const jsonData = pm.response.json();",
									"    if (Array.isArray(jsonData)) {",
									"        pm.expect(jsonData).to.be.an('array');",
									"    } else {",
									"        pm.expect(jsonData).to.have.property('news');",
									"        pm.expect(jsonData.news).to.be.an('array');",
									"    }",
									"})",
									"",
									"",
									"pm.test('News articles have ticker associations if present', function () {",
									"    const jsonData = pm.response.json();",
									"    const news = Array.isArray(jsonData) ? jsonData : jsonData.news;",
									"    if (news && news.length > 0) {",
									"        news.forEach(function (article) {",
									"            if (article.ticker) {",
									"                pm.expect(article.ticker).to.be.a('string');",
									"            }",
									"            if (article.tickers) {",
									"                pm.expect(article.tickers).to.be.an('array');",
									"            }",
									"        });",
									"    }",
									"})"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/news?date=2025-01-15",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"news"
							],
							"query": [
								{
									"key": "date",
									"value": "2025-01-15",
									"description": "Date in YYYY-MM-DD format"
								}
							]
						},
						"description": "Get news articles for a specific date."
					},
					"response": []
				}
			],
			"description": "Standalone news and recommendation endpoints"
		},
		{
			"name": "Error Cases",
			"item": [
				{
					"name": "Invalid Room Code",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Room with code INVALID not found\", function () {",
									"    pm.response.to.have.status(404);",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/multiplayer/rooms/INVALID",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"multiplayer",
								"rooms",
								"INVALID"
							]
						},
						"description": "Test error handling for non-existent room.\n\nExpected: 404 Not Found"
					},
					"response": []
				},
				{
					"name": "Invalid Date Range",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"start_date must be on or after 2025-01-01\", function () {",
									"    pm.response.to.have.status(400);",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/game/data?start_date=2024-01-01&end_date=2024-01-15",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"game",
								"data"
							],
							"query": [
								{
									"key": "start_date",
									"value": "2024-01-01",
									"description": "Date before minimum allowed"
								},
								{
									"key": "end_date",
									"value": "2024-01-15"
								}
							]
						},
						"description": "Test invalid date range error.\n\nExpected: 400 Bad Request - Date before minimum"
					},
					"response": []
				}
			],
			"description": "Test error handling and validation"
		},
		{
			"name": "End Game (Sync Mode)",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"room_code\": \"{{room_code}}\",\n  \"ended_by\": \"string\"\n}"
				},
				"url": {
					"raw": "{{base_url}}/api/v1/multiplayer/rooms/{{room_code}}/end-game",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"v1",
						"multiplayer",
						"rooms",
						"{{room_code}}",
						"end-game"
					]
				},
				"description": "End the game early (sync mode).\n\nTeacher can force game to end before all days complete."
			},
			"response": []
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8000",
			"type": "string"
		},
		{
			"key": "room_code",
			"value": "",
			"type": "string"
		},
		{
			"key": "room_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "player_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "player2_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "sync_room_code",
			"value": "",
			"type": "string"
		}
	]
}